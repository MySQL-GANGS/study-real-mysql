## 내용정리

- ch.2 다루면서 지난주에 CASE 문, UNION 에 대해 이야기한 것과 상당히 유사하다는 느낌을 받았다.
- 제목은 sql 의 조건 분기인데.... 도입부 부터 CASE 문 활용한다고 언지를 줬다.
- 예상했던 내용들이 나왔다.
- UNION
	- 장점이...
		- 큰 문제를 작은 문제로 나눌 수 있는 절차지향적으로 코드를 작성할 수 있게
		- 간단하게 레코드들을 조합할 수 있다.
	- 단점이...
		- 테이블 조회 횟수\(I/O)가 비교적으로 많이 발생한다.
- UNION 사용시 테이블 조회가 SELECT 문제가 발생한다.
- UNION 이 인덱스를 잘 사용하는데 이외의 경우에서 풀스캔이 발생하는 상황도 고려하라.
- 데이터가 적은 경우에는 인덱스 조회 비용과 풀스캔 비용이 비슷해서 옵티마이저가 풀스캔을 선택 할 수도 있다.
- WHERE 구문에서 OR 을 사용하면 해당 필드의 인덱스 사용이 불가, CASE, IN 도 썩 다르지 않다.
- 언어에 자연스러운 방법으로 구현해야하는데...
	- UNION 은 애초에 단어부터 조건분기가 목적이 아니었고,
	- CASE는 조건분기를 목적으로 만들어져 있었다.

## 스터디 내용 정리

- UNION에 장단에 대해 헤비하게 이야기함
- SQL 중급자가 되려면 CASE 문으로 작성 많이 해야된다고 함
- UNION 작성시 실행계획을 보면 쿼리가 작성한 갯수만큼 실행되고 그만큼 I/O 비용이 많이 발생한다.
- 가독성 측면에서도 떨어진다. 성능상에 이슈가 있을 수도 있겠구나.
- Index 걸어주면 빠를 수도 있다.
- 데이터 갯수가 적으면 UNION 함수 쓸 수도 있을듯 웬만하면 사용하지 않기
- WHERE 구에서 조건 분기하는 사람은 초보자
	- WHERE 구는 절차지향적인것
	- 저자왈 / SQL 마스터하려면 식에 집중해야한다.
	- ***SQL은 선언형 적으로 작성해야 한다.
- 집계와 조건분기 : UNION 을 사용한 방법
- 10강 : 그래도 UNION 이 필요한 경우
- 결합을 하는 경우가 성능적으로 이슈가 있을수도...
- CASE 문이 UNION, OR, IN 과 결과가 다를 수 있는 이유

## etc /

- TODO / 다음부터는 적극적인 예제 경험 *** 주혁 숙제 : 프로젝트 QueryDSL == JPA 로 추상화 다음에는 QueryDSL 로 작성해서 가져오기
