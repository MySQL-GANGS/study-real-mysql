# 인덱스
---
* 인덱스의 종류
* 인덱스의 특성
* 영향도 : 물리적 모델링. 쿼리튜닝의 기본

### 디스크 읽기 방식
---
* 디스크 같은 기계식 장치의 성능은 상당히 제한적으로 발전
* 데이터베이스 성능 튜닝 -> 디스크 I/O를 줄이느냐가 관건

HHD와 비교되는 SSD의 장점
* 랜덤 I/O가 훨씬 빠르다. -> DBMS용 스토리지에 최적

랜덤 I/O와 순차 I/O
* 하드 디스크 드라이브의 플래서(원판)을 돌려서 읽어야 할 데이터가 저장된 위치로 데스크 헤더를 이동시킨 다음 데이터를 읽는 것을 의미.
* 순차 I/O는 디스크 헤더를 1번. 랜덤I/O는 기록할 페이지의 개수만큼..(거의)
* SDD에서도 전체 Throughput이 차이가 난다. 

용어...
* 캐시메모리가 장착된 RAID 컨트롤러.

* 쿼리튜닝은 랜덤 I/O를 순차I/O로 바꿔서 실행하는 것이 아니라  랜덤 I/O자체를 줄여주는 것이 목적. 
* 랜덤 I/O를 줄인다 : 꼭 필요한 데이터만 읽도록 쿼리를 개선하는 것. 

Range Scan
* Index Range Scan : Random I/O
* Full Table Scan : 순차 I/O
* 큰 테이블의 레코드를 읽는 작업 -> 순차I/O선호 -> OLTP(On-Line Transaction Processing)성격의 웹서비스보다는 데이터 웨어하우스나 통계 작업에서 자주 사용.

## 인덱스란?
---
* Column의 값과 해당 레코드가 저장된 주소를 (Key-Value pair)로 인덱스를 만들어 둔다.
* DBMS의 인덱스도 마찬가지로 칼럼의 값을 주어진 순서로 미리 정렬해서 보관.

#### 인덱스 자료구조
* SortedList : DBMS 의 인덱스와 같은 자료 구조.
  * 저장되는 값을 항상 정렬된 상태로 유지하는 자료구조.  
* ArrayList : 데이터 파일과 같은 자료 구조.
  * 저장되는 순서 그대로 유지하는 자료 구조. 

#### Sorted List
* 저장될 때마다 항상 값을 정렬해야 하므로 저장하는 과정이 복잡하고 느림.(INSERT UPDATE DELETE)
* 이미 정렬되어 있어서 아주빨리 원하는 값을 찾아올 수 있다. 
* WHERE 절에 사용되는 조건이라고 인덱스에 모두 포함시키면 성능에 무리가 올 수 있다. 

#### 인덱스의 역할별 구분
* 프라이머리 키(Primary key)
  * 프라이머리 키 인덱스는 해당 레코드를 식별할 수 있는 기준값이 되기 때문에 식별라자로 부른다. NULL값을 허용하지 않으며 중복을 허용하지 않는 것이 특징이다. 
* 보조 키(Secondary key)

#### 데이터 저장방식 별 구분(Algorithm별 구분)
* B-Tree Index
* Hash Index
* Fractal-Tree Index
* Merge-Tree Index (Based Log)
  
#### 데이터의 중복 허용 여부릐 구분
* Unique Index
* Non-Unique Index

## B-Tree Index (Balanced Tree)
---
* B+-Tree
* B*-Tree

### B-Tree의 기본적인 구조
* 트리 구조의 최상위에 하나의 루트노드가 존재하고 그 하위에 자식 노드가 붙어 있는 형태다. 
* 가장 하위 노드 : Leaf node
* 중간 노드 : Branch node
* Leaf node는 항상 실제 데이터 레코드를 찾아가기 위한 주솟값을 가지고 있다. 
* 인덱스의 키 값은 모두 정렬되어 있다. 
* 데이터 파일의 레코드는 순서대로 정렬되어 있지 않을 수 있다. 
* 참고사항 : InnoDB에서는 데이터가 데이터파일에 클러스터링 되어 저장된다. 

#### MyISAM 테이블의 인덱스와 데이터파일의 관계
* 레코드 주소는 MyISAM테이블의 생성 옵션에 따라 레코드가 테이블에 INSERT된 순번이거나 데이터 파일 내의 위치(OFFSET)이다. 
* Secondary Index가 물리적인 주소를 가진다. 

#### InnoDB스토리지 엔진을 사용하는 테이블의 인덱스와 데이터파일의 관계
* 프라이머리 키가 ROWID의 역할을 한다. 
* Secondary Index는 논리적인 주소를 가진다. 

### B-Tree의 인덱스 키 추가 및 삭제
