# 데이터 압축
---
디스크에 저장된 데이터 파일의 크기
 - 쿼리 성능과 직결
 - InnoDB 버퍼 풀, 더티 페이지 사용횟수, 백업 시간, 복구 시간, 저장공간과 비용 문제도 직결된다. 

이를 해결하기 위해 데이터 압축 기능을 제공

MySQL 서버에서 사용하는 압축방식
 1. 테이블 압축
 2. 페이지 압축.

## 페이지 압축(Transparent Page Compresssion)
---
* MySQL 서버가 디스크에 저장하는 시점에 데이터 페이지가 압축되어 저장.
* MySQL 서버가 디스크에서 데이터 페이지를 읽어올 때 압축이 해제
* 16KB 데이터 페이지를 압축한 결과가 용량이 얼마나 될지 예측이 불가

1. 16KB 페이지를 압축(압축 결과를 7KB로 가정)
2. MySQL 서버는 디스크에 압축된 결과 7KB를 기록 ( 이때 MySQL 서버는 압축 데이터 7KB에 9KB이 빈 데이터를 기록)
3. 디스크에 데이터를 기록한 후, 7KB 이후의 공간 9KB에 대해 펀치 홀을 생성
4. 파일 시스템은 7KB만 남기고 나머지 디스크의 9KB공간은 다시 운영체제로 반납

그러나... MySQL서버의 페이지 압축의 펀치 홀 기능은 운영체제 뿐만 아니라 하드웨어 자체에서도 해당 기능을 지원해야 사용 가능하다는 점이다. 

그리고 파일시스템 관련 명령어가 펀치 홀을 지워나지 못하다는 것..

실제 페이지 압축은 많이 사용하지 않는 상태.. 사용하려면 COMPRESSION옵션을 설정

CREATE TABLE t1 (c1 INT) COMPRESSION="zlib";

## 테이블 압축
---
